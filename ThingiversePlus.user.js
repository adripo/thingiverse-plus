// ==UserScript==
// @name         Thingiverse Plus
// @namespace    https://thingiverse.com/
// @version      1.1.1
// @description  Thingiverse with extra features
// @author       adripo
// @homepage     https://github.com/adripo/thingiverse-plus
// @icon         https://www.thingiverse.com/favicon.ico
// @updateURL    https://raw.githubusercontent.com/adripo/thingiverse-plus/main/ThingiversePlus.meta.js
// @downloadURL  https://raw.githubusercontent.com/adripo/thingiverse-plus/main/ThingiversePlus.user.js
// @supportURL   https://github.com/adripo/thingiverse-plus/issues
// @match        https://www.thingiverse.com/*
// @require      https://cdn.jsdelivr.net/gh/CoeJoder/waitForKeyElements.js@v1.2/waitForKeyElements.js
// @require      https://raw.githubusercontent.com/eligrey/FileSaver.js/master/src/FileSaver.js
// @require      https://raw.githubusercontent.com/Stuk/jszip/master/dist/jszip.min.js
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_setValue
// ==/UserScript==
!function(){"use strict";let e,n,t;const i="hide-ads",l="advanced-collections",o="elements-per-page",a="elements-per-page-position",c="download-all-files",s="download-all-files-images";function d(e,n,t){let i=document.createElement("div"),l=document.createElement("input");l.type="checkbox",l.id="plus-checkbox-"+e,l.className="plus-settings-checkbox",l.onchange=function(){t()};const o=GM_getValue("settings_"+e,!1);l.checked=!!o;let a=document.createElement("label");return a.htmlFor=l.id,a.innerHTML=n,i.appendChild(l),i.appendChild(a),i}function r(){let n=document.getElementById("plus-checkbox-hide-ads");if(GM_setValue("settings_hide-ads",n.checked),n.checked){window.location.pathname.startsWith("/thing:")&&v(6),function(){if(!e){e=GM_addStyle("div[class^='AdCard__'] {\n                    display: none !important;\n                }")}}()}else e&&(e.remove(),e=void 0)}function p(){let e=document.getElementById("plus-checkbox-advanced-collections");const n=GM_getValue("settings_advanced-collections",!1);GM_setValue("settings_advanced-collections",e.checked),e.checked?function(){let e=function(){try{return JSON.parse(w(JSON.parse(window.localStorage["persist:root"]).collections)).userData}catch(e){return null}}();console.log(e),e.forEach((e=>{console.log(e)}));const n=function(){try{return JSON.parse(window.localStorage["user-data"]).user}catch(e){return null}}();if(n){(async function(e="",n=""){const t="https://api.thingiverse.com/users/"+e+"/collections/true";return(await fetch(t,{method:"GET",headers:{Authorization:"Bearer "+n}})).json()})(function(){try{return JSON.parse(window.localStorage["user-data"]).data.name}catch(e){return null}}(),n).then((e=>{console.log("Successfully retrieved Collections.");let n=function(e){if(0===e.length)return null;let n=new Date(e[0].modified),t=0;for(let i=1;i<e.length;i++)new Date(e[i].modified)>n&&(t=i,n=new Date(e[i].modified));return t}(e);n&&e.unshift(e.splice(n,1)[0]);let t=[];e.forEach((e=>{let n=document.createElement("option");n.value=e.id,n.text=e.name+" ("+e.count+")",t.push(n)}));let i=document.createElement("option");i.style.cssText="display: none;",i.value="-1",i.text="Create a new Collection",t.push(i);let l=Array.from(document.querySelectorAll(".react-app select>option")).filter((e=>"Create a new Collection"===e.innerHTML)).map((e=>e.parentNode)),o=Array.from(document.querySelectorAll('a[class^="SideMenuItem__textWrapper--"]')).filter((e=>"Collect Thing"===e.innerHTML)).map((e=>e.parentNode)),a=Array.from(document.querySelectorAll('div[class^="CardActionItem__textWrapper--"]')).filter((e=>"Collect Thing"===e.innerHTML)).map((e=>e.parentNode.parentNode.parentNode));function c(e){return new Promise((n=>setTimeout(n,e)))}o.concat(a).forEach((e=>{e.onclick=async function(){await c(0),l.forEach((e=>{e.selectedIndex=0}))}})),l.forEach((e=>{const n=t.map((e=>e.cloneNode(!0)));e.replaceChildren(...n),e.selectedIndex=0;let i=document.createElement("button");i.style.cssText="width: 16%; height: 30px;",i.textContent="+",i.onclick=function(){e.value="-1";const n=new Event("change",{bubbles:!0});e.dispatchEvent(n)};let l=function(e=null){let n=document.createElement("span");e&&n.appendChild(e);return n}(i);e.style="width: 84%;",e.after(l)}))})).catch((e=>{console.error("Error:",e)}))}}():n&&window.location.reload()}function u(){let e=document.getElementById("plus-checkbox-elements-per-page");const i=GM_getValue("settings_elements-per-page",!1);GM_setValue("settings_elements-per-page",e.checked),e.checked!==i&&M(a),e.checked?function(){const e=window.location.pathname;if("/"===e||"/search"===e){!function(e=!1){const i=[20,30,60,100,200],l=GM_getValue("elements_per_page",i[0]);v(l);const o=".plus-elements-per-page {\n                display: inline-block;\n                position: relative;\n                background-color: #fff;\n                width: 300px;\n                margin-bottom: 10px;\n                margin-right: 20px;\n                vertical-align: top;\n            }\n\n            .plus-elements-per-page > label {\n                display: inline-block;\n                width: 210px;\n                margin-left: 10px;\n                font-size: 12px;\n                color: #555;\n                text-align: left;\n            }\n\n            .plus-elements-per-page > select {\n                width: 80px;\n                height: 30px;\n                cursor: pointer;\n                border: 0;\n                border-left: 1px solid rgba(85, 85, 85, .8);\n                color: #555;\n                opacity: 0.8;\n            }",a="div[class^='Sort__dropdown--'] {\n                margin-left: 0px;\n            }",c="div[class^='FilterBySort__dropdown--'] {\n                margin-right: 20px;\n            }\n            \n            .plus-elements-per-page {\n                margin-right: 0;\n            }";let s=[];i.forEach((e=>{let n=document.createElement("option");n.value=e.toString(),n.selected=l===e,n.innerHTML=e.toString(),s.push(n)}));let d=document.createElement("div");d.className="plus-elements-per-page";let r=document.createElement("select");r.id="plus-elements-per-page",s.forEach((e=>{r.add(e)})),r.onchange=function(){const e=parseInt(this.value);i.includes(e)&&GM_setValue("elements_per_page",e),window.location.reload()};let p=document.createElement("label");p.htmlFor=r.id,p.innerHTML="Elements per page:",d.appendChild(p),d.appendChild(r),n=GM_addStyle(o);const u=document.querySelector('div[class^="FilterBySort__dropdown--"]');e?(t=GM_addStyle(c),u.parentNode.append(d)):(t=GM_addStyle(a),u.parentNode.prepend(d))}(GM_getValue("subsettings_elements-per-page-position",!1))}}():i&&b()}function g(){let e=document.getElementById("plus-checkbox-download-all-files");const n=GM_getValue("settings_download-all-files",!1);GM_setValue("settings_download-all-files",e.checked),e.checked!==n&&M(s),e.checked?function(){const e='a[class^="SidebarMenu__download--"]';let n=document.querySelector(e);n?y(n):waitForKeyElements(e,(e=>{y(e)}))}():function(){const e='a[class^="SidebarMenu__download--"]';let n=document.querySelector(e);n?x(n):waitForKeyElements(e,(e=>{x(e)}))}()}function h(){let e=document.getElementById("plus-toggle-elements-per-page-position");GM_setValue("subsettings_elements-per-page-position",e.checked),b(),u()}function m(){let e=document.getElementById("plus-checkbox-download-all-files-images");GM_setValue("subsettings_download-all-files-images",e.checked)}function b(){let e=document.querySelector(".plus-elements-per-page");e&&e.remove(),n&&(n.remove(),n=void 0),t&&(t.remove(),t=void 0)}function M(e){let n=document.getElementById("plus-settings-"+e);n.classList.toggle("hidden"),Array.from(n.querySelectorAll("input[type=checkbox]")).forEach((e=>{e.disabled=!e.disabled}))}function v(e){URLSearchParams.prototype._append=URLSearchParams.prototype.append,URLSearchParams.prototype.append=function(n,t){return"per_page"===n&&(t=e),this._append(n,t)}}function f(){document.body.classList.add("wait");let e=new JSZip,n=JSON.parse(w(function(){try{return JSON.parse(window.localStorage["persist:root"]).currentThing}catch(e){return null}}())).thing;n.files.forEach((n=>{let t=A(n.public_url);e.file(n.name,t)}));if(GM_getValue("subsettings_download-all-files-images",!1)){let t=e.folder("images");n.images.forEach((e=>{let n=A(e.sizes.filter((e=>"display"===e.type&&"large"===e.size))[0].url);t.file(e.name,n)}))}let t=n.id+" - "+n.name;t=function(e,{replacement:n="ï¿½"}={}){const t=e;(e=(e=(e=e.split(/[\r\n]/).map((e=>e.trim())).filter((e=>e.length)).join("  ")).replaceAll(/[<>:"\/\\|?*\x00-\x1F]/g,n)).replace(/\.$/,"")).length||(e="_");e.match(/^(CON|PRN|AUX|NUL|COM1|COM2|COM3|COM4|COM5|COM6|COM7|COM8|COM9|LPT1|LPT2|LPT3|LPT4|LPT5|LPT6|LPT7|LPT8|LPT9)(\..+)?$/)&&(e=`_${e}`);return{fname:e,isOriginal:e===t}}(t).fname,e.generateAsync({type:"blob"}).then((function(e){saveAs(e,t),document.body.classList.remove("wait")}))}function y(e){e.onclick=async function(){f()}}function x(e){e.onclick=null}function w(e){return(e+"").replace("\\","")}async function A(e){return(await fetch(e,{method:"GET"}).catch((e=>{console.error("Error:",e)}))).arrayBuffer()}GM_addStyle(".wait {\n                cursor: wait;\n            }\n            \n            .plus-settings-button {\n                position: fixed;\n                z-index: 101;\n                bottom: 10px;\n                right: 10px;\n                border-radius: 3px;\n                padding: 5px;\n                background-color: #fff;\n            }\n            \n            .plus-settings-button img {\n                box-sizing: content-box;\n                max-width: 20px;\n                padding: 10px;\n                border-radius: 3px;\n                vertical-align: middle;\n                background-color: #248bfb;\n                cursor: pointer;\n            }\n            \n            .plus-settings-container {\n                position: fixed;\n                transition: max-height 0.3s, max-width 0.3s, visibility 0.3s, opacity 0.3s linear;\n                z-index: 101;\n                bottom: 70px;\n                right: 10px;\n                max-height: 100%;\n                max-width: 100%;\n                visibility: visible;\n                opacity: 1;\n                background-color: #248bfb;\n                overflow: hidden;\n                padding: 5px;\n                border-radius: 3px;\n                box-sizing: content-box;\n            }\n            \n            .plus-settings-container.hidden {\n                max-width: 0;\n                max-height: 0;\n                visibility: hidden;\n                opacity: 0;\n            }\n            \n            .plus-settings-container > div {\n                background-color: #f5f5f5;\n                padding: 10px;\n                border-radius: 3px;\n            }\n            \n            .plus-settings-container > div:not(:last-child) {\n                margin-bottom: 5px;\n            }\n            \n            .plus-settings-checkbox {\n                vertical-align: middle;\n                width: 32px;\n                height: 32px;\n                margin: 0;\n                cursor: pointer;\n            }\n            \n            .plus-settings-checkbox + label {\n                display: inline-block;\n                vertical-align: middle;\n                color: #555;\n                opacity: 1;\n                font-size: 16px;\n                margin: 0 10px 0 10px;\n                line-height: 32px;\n                cursor: pointer;\n                font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol!important;\n            }\n            \n            .plus-subsettings-element {\n                --height: 32px;\n                \n                transition: max-height 0.3s, visibility 0.3s, opacity 0.3s linear;\n                max-height: var(--height);\n                visibility: visible;\n                opacity: 1;\n                overflow: hidden;\n            }\n            \n            .plus-subsettings-element.hidden {\n                max-height: 0;\n                visibility: hidden;\n                opacity: 0;\n            }\n            \n            .plus-subsettings-element label,\n            .plus-subsettings-element span {\n                color: #555;\n                opacity: 1;\n                font-size: 14px;\n                margin: auto;\n            }\n            \n            .plus-settings-pipe {\n                --width: 32px;\n                --top-gap: 2px;\n                \n                display: inline-block;\n                vertical-align: middle;\n                width: calc(var(--width) / 2);\n                height: calc(var(--height) / 2 - var(--top-gap));\n                margin: var(--top-gap) 0 calc(var(--height) / 2 - var(--top-gap)) calc(var(--width) / 2);\n                color: #555;\n                opacity: .8;\n                border-left: 1px dashed;\n                border-bottom: 1px dashed;\n            }\n            \n            .plus-settings-pipe + span,\n            .plus-settings-pipe + input {\n                margin: 0 10px 0 10px;\n            }\n            \n            .plus-subsettings-element > .plus-settings-checkbox {\n                width: 24px;\n                height: 24px;\n            }"),GM_addStyle('/* Toggle Style */\n            .plus-toggle {\n                --width: 120px;\n                --height: calc(var(--width) / 6);\n                \n                position: relative;\n                display: inline-block;\n                opacity: 1;\n                width: var(--width);\n                height: var(--height);\n                vertical-align: middle;\n                margin: auto;\n                background-color: rgba(0,0,0,.1);\n                cursor: pointer;\n            }\n            \n            .plus-toggle, .plus-toggle .slider {\n                height: var(--height);\n                border-radius: calc( var(--height) / 2);\n            }\n            \n            .plus-toggle .slider {\n                position: absolute;\n                width: 50%;\n                background-color: #248bfb;\n                box-shadow: 0 2px 15px rgba(0,0,0,.15);\n                transition: transform .2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            }\n            .plus-toggle .labels {\n                width: 50%;\n                height: 100%;\n                position: absolute;\n                display: flex;\n                opacity: 1;\n                justify-content: center;\n                align-items: center;\n                font-size: 0.75rem;\n                color: #555;\n                transition: color .2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            }\n            \n            .plus-toggle .labels.right {\n                right: 0;\n            }\n            \n            /* Toggle */\n            .plus-toggle input[type="checkbox"] {\n                display: none;\n            }\n            \n            .plus-toggle input[type="checkbox"]:checked + .slider {\n                transform: translateX(100%);\n            }\n            \n            .plus-toggle input[type="checkbox"]:checked ~ .labels.right,\n            .plus-toggle input[type="checkbox"]:not(:checked) ~ .labels:not(.right) {\n                color: white;\n            }'),function(){const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAABCCAYAAAAMlmvWAAAACXBIWXMAAC4jAAAuIwF4pT92AAAG2GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4xLWMwMDAgNzkuZWRhMmIzZiwgMjAyMS8xMS8xNC0xMjozMDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMi0wMS0wM1QwMzoxMzoyNCswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjItMDEtMDNUMDM6MjM6MDErMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjItMDEtMDNUMDM6MjM6MDErMDE6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N2YzMWI3NWQtMDZiYy1jMzRhLWIyOGYtZTdlODA2NDc4YjRlIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MmE0NjVlNzAtZDg4Ni04MTQzLThmYjItNTcyMWYxZjcyOTM0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWNmYjU5ODctOTJjMi0xODQ4LWI4MzktNGU2YTEzMDA0M2I3Ij4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSIrIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSIrIi8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1Y2ZiNTk4Ny05MmMyLTE4NDgtYjgzOS00ZTZhMTMwMDQzYjciIHN0RXZ0OndoZW49IjIwMjItMDEtMDNUMDM6MTM6MjQrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy4xIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ZjMxYjc1ZC0wNmJjLWMzNGEtYjI4Zi1lN2U4MDY0NzhiNGUiIHN0RXZ0OndoZW49IjIwMjItMDEtMDNUMDM6MjM6MDErMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBh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";let n=document.createElement("div");n.className="plus-settings-button";let t=document.createElement("img");t.src=e,t.alt="ThingiversePlus-logo",t.onclick=function(){document.querySelector(".plus-settings-container").classList.toggle("hidden")},n.appendChild(t),document.body.appendChild(n)}(),function(){let e=document.createElement("div");e.classList.add("plus-settings-container"),e.classList.add("hidden");let n=document.createElement("div"),t=d(c,"Download All Files As Zip",g);n.appendChild(t);let b=function(e,n,t,i){const l=GM_getValue("settings_"+i,!1);let o=document.createElement("div");o.id="plus-settings-"+e,o.className="plus-subsettings-element",l||o.classList.add("hidden");let a=document.createElement("div");a.className="plus-settings-pipe",o.appendChild(a);const c=GM_getValue("subsettings_"+e,!1);let s=document.createElement("input");s.type="checkbox",s.id="plus-checkbox-"+e,s.className="plus-settings-checkbox",s.checked=!!c,s.disabled=!l,s.onchange=function(){t()},o.appendChild(s);let d=document.createElement("label");return d.htmlFor=s.id,d.innerHTML=n,o.appendChild(d),o}(s,"include images",m,c);n.appendChild(b),e.appendChild(n);let M=document.createElement("div"),v=d(o,"Elements Per Page Selector",u);M.appendChild(v);let f=function(e,n,t,i,l,o){const a=GM_getValue("settings_"+o,!1);let c=document.createElement("div");c.id="plus-settings-"+e,c.className="plus-subsettings-element",a||c.classList.add("hidden");let s=document.createElement("div");s.className="plus-settings-pipe",c.appendChild(s);let d=document.createElement("span");d.innerHTML=n+":",c.appendChild(d);const r=GM_getValue("subsettings_"+e,!1);let p=document.createElement("label");p.className="plus-toggle";let u=document.createElement("input");u.type="checkbox",u.id="plus-toggle-"+e,u.checked=!!r,u.disabled=!a,u.onchange=function(){l()},p.appendChild(u);let g=document.createElement("div");g.className="slider",p.appendChild(g);let h=document.createElement("span");h.className="labels",h.innerHTML=t.toUpperCase(),p.appendChild(h);let m=document.createElement("span");return m.className="labels right",m.innerHTML=i.toUpperCase(),p.appendChild(m),c.appendChild(p),c}(a,"Position","left","right",h,o);M.appendChild(f),e.appendChild(M);let y=d(l,"Advanced Collections",p);e.appendChild(y);let x=d(i,"Hide Ads",r);e.appendChild(x),document.body.appendChild(e),window.addEventListener("click",(function(e){let n=document.querySelector(".plus-settings-container");const t=document.querySelector(".plus-settings-button");n.classList.contains("hidden")||t.contains(e.target)||n.contains(e.target)||n.classList.add("hidden")}))}(),r(),p(),u(),g()}();